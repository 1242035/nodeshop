{"ts":1369169223357,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nvar bcrypt = require('bcrypt');\n\n// Define schema\nvar UserSchema = new Schema({\n    name : { \n        first: { type: String, required: true } \n      , last: { type: String, required: true }\n    }\n  , email: { type: String, unique: true }\n  , salt: { type: String, required: true }\n  , hash: { type: String, required: true }\n});\n\n\nUserSchema\n.virtual('password')\n.get(function () {\n  return this._password;\n})\n.set(function (password) {\n  this._password = password;\n  var salt = this.salt = bcrypt.genSaltSync(10);\n  this.hash = bcrypt.hashSync(password, salt);\n});\n\n\nUserSchema.method('verifyPassword', function(password, callback) {\n  bcrypt.compare(password, this.hash, callback);\n});\n\nUserSchema.static('authenticate', function(email, password, callback) {\n  this.findOne({ email: email }, function(err, user) {\n      if (err) { return callback(err); }\n      if (!user) { return callback(null, false); }\n      user.verifyPassword(password, function(err, passwordCorrect) {\n        if (err) { return callback(err); }\n        if (!passwordCorrect) { return callback(null, false); }\n        return callback(null, user);\n      });\n    });\n});\n\nmodule.exports = mongoose.model('User', UserSchema);"]],"start1":0,"start2":0,"length1":0,"length2":1262}]],"length":1262}
{"contributors":[],"silentsave":false,"ts":1369169432766,"patch":[[{"diffs":[[0," String,"],[1," , required: true,"],[0," unique:"]],"start1":281,"start2":281,"length1":16,"length2":34}]],"length":1280,"saved":false}
{"ts":1369169460737,"patch":[[{"diffs":[[0," String,"],[-1," ,"],[0," require"]],"start1":281,"start2":281,"length1":18,"length2":16}]],"length":1278,"saved":false}
{"ts":1369169844771,"patch":[[{"diffs":[[0," true }\n"],[1,"  },{strict: true"],[0,"});\n\n\nUs"]],"start1":399,"start2":399,"length1":16,"length2":33}]],"length":1295,"saved":false}
{"ts":1369169941244,"patch":[[{"diffs":[[0,"}\n  "],[-1,"},{strict: true"],[0,"});\n"]],"start1":405,"start2":405,"length1":23,"length2":8}]],"length":1280,"saved":false}
{"contributors":[],"silentsave":false,"ts":1369219880754,"patch":[[{"diffs":[[0,"}\n    }\n"],[1,"  , address : {\n      address1: {type:String, required:false},\n      address2: {type:String, required:false},\n      town: {type:String, required:false},\n      province: {type:String, required:false},\n      country: {type:String, required:false},\n      pcd: {type:String, required:false}\n  }\n  , contactno: {type: Number, required: false}\n"],[0,"  , emai"]],"start1":255,"start2":255,"length1":16,"length2":354}]],"length":1618,"saved":false}
