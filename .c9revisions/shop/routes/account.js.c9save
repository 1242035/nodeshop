{"ts":1369169213238,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var db = require('../data');\nvar config = require('../config.json')\n\nmodule.exports = {\n\n    // Get login modal\n    getLoginModal: function(req, res) {\n        res.render('modals/login');\n    },\n\n    // Get register modal\n    getRegisterModal: function(req, res) {\n        res.render('modals/register');\n    },\n\n    postRegister: function(req, res) {\n    \n        // Save user in database\n        db.saveUser({\n                fname : req.param('name.first'),\n                lname : req.param('name.last'),\n                email : req.param('email'),\n                password : req.param('password')\n            }, \n            \n            function(err,docs) {\n                res.redirect('/account');\n        });\n    },\n\n    getAccount: function(req, res) {\n        db.getTopCategories(function(err, categories) {\n            if (err) {console.log(err)}\n            res.render('account', {\n                title: config.store.name + ' | My Account',\n                logged: req.isAuthenticated(),\n                user: req.user,\n                cart: req.session.cart,\n                categories: categories,\n            });\n        });\n    },\n\n    getLogout: function(req, res){\n    \n        // Passport logout function\n        req.logout();\n        \n        // Redirect to home page\n        res.redirect('/');\n    \n    }\n};"]],"start1":0,"start2":0,"length1":0,"length2":1329}]],"length":1329}
{"contributors":[],"silentsave":false,"ts":1369170086064,"patch":[[{"diffs":[[0,"    "],[-1,"titl"],[1,"stor"],[0,"e: c"]],"start1":906,"start2":906,"length1":12,"length2":12},{"diffs":[[0,"name"],[-1," + ' | "],[1,",\n                title: '"],[0,"My A"]],"start1":930,"start2":930,"length1":15,"length2":34}]],"length":1348,"saved":false}
{"ts":1369170410844,"patch":[[{"diffs":[[0,"/account"],[1,"/registerd"],[0,"');\n    "]],"start1":693,"start2":693,"length1":16,"length2":26}]],"length":1358,"saved":false}
{"ts":1369170421993,"patch":[[{"diffs":[[0,"register"],[1,"e"],[0,"d');\n   "]],"start1":702,"start2":702,"length1":16,"length2":17}]],"length":1359,"saved":false}
{"ts":1369170739204,"patch":[[{"diffs":[[0,"      });\n    },"],[1,"\n    \n    // Get registered page\n    getRegistered: function(req, res) {\n        db.getTopCategories(function(err, categories) {\n            if (err) {console.log(err)}\n            res.render('account/registered', {\n                store: config.store.name,\n                title: 'Thank-you for registering!',\n                logged: req.isAuthenticated(),\n                user: req.user,\n                cart: req.session.cart,\n                categories: categories,\n            });\n        });\n    },"],[0,"\n\n    getAccount"]],"start1":718,"start2":718,"length1":32,"length2":536}]],"length":1863,"saved":false}
